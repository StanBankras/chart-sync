{"version":3,"sources":["../../server/modules/db.js"],"names":["dotenv","config","firebase","initializeApp","apiKey","process","env","FIREBASE_API_KEY","authDomain","FIREBASE_AUTH_DOMAIN","projectId","FIREBASE_PROJECT_ID","db","firestore","data","collection","get","docs","forEach","doc","rooms","id","saveRoom","documentId","object","copy","JSON","parse","stringify","users","update"],"mappings":";;;;;;;;AAAA;;AAEA;;AACA;;;;;;;;AAFAA,gBAAOC,MAAP;;AAIAC,kBAASC,aAAT,CAAuB;AACrBC,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADC;AAErBC,EAAAA,UAAU,EAAEH,OAAO,CAACC,GAAR,CAAYG,oBAFH;AAGrBC,EAAAA,SAAS,EAAEL,OAAO,CAACC,GAAR,CAAYK;AAHF,CAAvB;;AAMO,IAAMC,EAAE,GAAGV,kBAASW,SAAT,EAAX,C,CAEP;AACA;;;;;AACA,kBAAC,aAAiB;AAChB,MAAMC,IAAI,SAASF,EAAE,CAACG,UAAH,CAAc,OAAd,EAAuBC,GAAvB,EAAnB;AACAF,EAAAA,IAAI,CAACG,IAAL,CAAUC,OAAV,CAAkBC,GAAG,IAAIC,cAAMD,GAAG,CAACE,EAAV,IAAgBF,GAAG,CAACL,IAAJ,EAAzC;AACD,CAHD;;SAKsBQ,Q;;;;;gCAAf,WAAwBC,UAAxB,EAAoCC,MAApC,EAA4C;AACjD,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeJ,MAAf,CAAX,CAAb;AACA,WAAOC,IAAI,CAACI,KAAZ;AACA,UAAMjB,EAAE,CAACG,UAAH,CAAc,OAAd,EAAuBI,GAAvB,CAA2BI,UAA3B,EAAuCO,MAAvC,CAA8CL,IAA9C,CAAN;AACD,G","sourcesContent":["import dotenv from 'dotenv';\ndotenv.config();\nimport firebase from 'firebase';\nimport { rooms } from '../server';\n\nfirebase.initializeApp({\n  apiKey: process.env.FIREBASE_API_KEY,\n  authDomain: process.env.FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.FIREBASE_PROJECT_ID\n});\n\nexport const db = firebase.firestore();\n\n// Get rooms from firestore database with all data\n// Store them in memory\n(async function() {\n  const data = await db.collection('rooms').get();\n  data.docs.forEach(doc => rooms[doc.id] = doc.data());\n})();\n\nexport async function saveRoom(documentId, object) {\n  const copy = JSON.parse(JSON.stringify(object));\n  delete copy.users;\n  await db.collection(\"rooms\").doc(documentId).update(copy);\n}"],"file":"db.js"}